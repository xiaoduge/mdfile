# socket是什么

​	socket"套接字“，网络上的两个程序通过一个双向的通信连接实现数据的交换，这个连接的一端称为一个socket。

​	UNIX/Linux中一切皆文件，为了表示和区分已经打开的文件，UNIX/Linux会给每个以文件分配一个ID，这个ID是一个int, 被称为文件描述符。网络连接也是一个文件，我们通过socket()函数创建一个网络连接，或者说打开一个网络文件，socket()的返回值就是文件描述符，既然网络连接是一个文件，我们就可以使用普通的文件操作函数来读写数据。

* read()读取网络数据
* write()向网络连接写入数据

___



# socket 类型

​	常用的socket类型：SOCK_STREAM、SOCK_DGRAM。

1. SOCK_STREAM 提供有序的、可靠的、双向的和基于连接的字节流，使用[^带外数据]传送机制，为Internet地址族使用TCP。

   特点：

   * 数据在传输过程中不会消失。
   * 数据是按顺序传输的。
   * 数据的发送和接收不是同步的。

   面向连接的套接字为了确保数据准确的、有序的传输数据，发送端在发送数据后必须等到接收端确认后才会发送下一个数据。发送端发送数据后一段时间内未收到接收端的确认，则会重新发送数据，直到接收端确认。这样面向连接的套接字从能保证数据可靠的、有序的传输。

   面向连接传输的数据会为每一个数据添加一个ID，接收端接收的到数据之后，会返回一个数据给接收端告诉接收端，我已经接收到这个ID的数据了。

   

2. SOCK_DGRAM 支持无连接的、不可靠的和使用固定大小（通常很小）缓冲区的[^数据报服务]，为Internet地址族使用UDP。

   特点：

   * 强调快速传输而非传输顺序。

   * 传输的数据可能丢失或损坏。

   * 限制每次传输的数据大小。

   * 数据的发送和接收是同步的。

     无连接的套接字的传输路径是不确定的，发送端只负责把数据发送出去，发送端不需要确认数据是否发送成功了。因此无连接的套接字发送的数据可靠性相对差，且数据传输的顺序是不可靠的，它只负责尽最大努力发送数据。

   

[^带外数据]: 使用与普通数据不同的通道独立传送给用户，是相连的每一对流套接口间一个逻辑上独立的传输通道。
[^数据报服务]: 数据报服务是由数据报交换网来提供。端系统的网络层同网络节点中的网络层之间，一致地按照数据报操作方式交换数据。当端系统要发送数据时，网络层给该数据附加上地址、序号等信息，然后作为数据报发送给网络节点；目的端系统收到数据报可能是不按照顺序到达，也有可能出现数据报丢失。数据报服务与OSI的无连接网络服务类似



